# arxivjs

arxivjs는 arXiv API와 상호작용하는 Node 기반 웹 앱이다.
arxivjs는 논문의 주제를 관리하고 논문 주제와 관련한 논문을 API를 이용하여 arxiv.org에서 검색하고 Gemini를 통해 논문을 자동 요약할 수 있며 이를 파일에 저장하여 사용자가 쉽게 논문 정보를 조회할 수 있다.

## 사용하는 패키지

* @google/generative-ai: Gemini에 논문 요약 요청을 위해 사용
* axios: HTML 클라이언트 라이브러리
* dotenv: 사용자 환경 설정을 읽는 라이브러리
* express: 웹 앱 개발 프레임워크
* nodemon: 앱 서버 자동 실행 라이브러리
* xml2js: XML 파서

## 소스 파일 구성

* index.html: 클라이언트 UI
* index.js: 앱 실행 스크립트
* script.js: 클라이언트 자바스크립트
* style.css: 클라이언트 UI 스타일 정의

## 실행 파일 구성

* run_arxivjs.bat: nodemon을 이용하여 앱을 실행한다.
* run_gemini.bat: 앱 개발을 위해 gemini를 실행한다.

## 특징 및 기능

* Node 기반 단일 페이지 어플리케이션 앱이다.
* 웹 UI 인터페이스 언어는 영어를 사용한다.
* 소스 코드에서 정의된 모든 함수에는 docstring을 작성한다. docstring은 영어로 작성한다.
* 웹 페이지의 좌측에 사이드 메뉴를 배치한다.
* 사이드 메뉴의 상단에는 "-"(Hide) 버튼이 있다.
* "-"(Hide) 버튼을 누르면 사이드 메뉴가 사라지며, "+"(Show) 버튼이 나타난다.
* "+"(Show) 버튼을 누르면 사이드 메뉴가 다시 나타난다.
* 사이드 메뉴에는 "Topic List", "Paper List", "Paper Detail" 메뉴 항목이 있다.
* Paper List 화면, Paper Detail 화면은 hidden 상태이며, 앱을 처음 실행 시 나타나는 기본 화면은 Topic List 화면이다.
* 메인 화면에는 상태에 따라 Topic List 화면, Paper List 화면, Paper Detail 화면 중 하나만 화면에 보이며 다른 화면은 hidden 상태이다.
* 사이트 메뉴는 스크롤되지 않으며, 메인 화면 위치에 나타나는 Topic List 화면과, Paper List 화면은 해당 화면에 표시되는 내용의 분량에 따라 수직 스크롤이 가능하다.

### Topic List 화면의 주요 기능

* Topic List 화면에서는 새로운 논문 주제를 생성하거나 생성된 논문의 주제 목록을 확인 및 관리할 수 있다.
* 새로운 논문의 주제를 추가하면, "data" 폴더 안에 논문 주제와 동일한 이름의 폴더를 생성한다.
* 논문의 주제 이름은 영어, 한글, 숫자, 공백문자(space)를 입력할 수 있으며 폴더 이름으로 허용하지 않는 다른 특수문자와 기호는 사용할 수 없다.
* 논문의 주제 목록은 표(table)의 형식으로 출력한다.
* 표는 "Topic Name"과 "Actions"의 열을 갖는다.
* 주제 목록은 알파벳 순서로 표시한다.
* 논문 주제 목록 표에서 논문의 주제 이름은 dodgerblue 색으로 표시한다.
* "Actions" 열에는 "Rename" 버튼과 "Delete" 버튼을 표시한다.
* "Rename" 버튼을 누르면 사용자가 논문의 주제 이름을 바꿀 수 있으며 이때 해당 폴더의 이름도 함께 바뀐다.
* "Delete" 버튼을 누르면 기존에 생성된 논문의 주제를 삭제할 수 있다.
* 논문의 주제를 삭제할 시에는 해당 폴더가 비어 있을 경우에만 폴더를 삭제할 수 있으며, 비어 있지 않으면 논문 주제를 삭제할 수 없다.
* 논문 주제 목록 표에서 논문의 주제 이름을 클릭하면, Topic List 화면을 hidden 상태로 전환하고 Paper List 화면을 표시한다.

### Paper List 화면의 주요 기능

* Paper List 화면에서는 Topic List 화면에서 선택한 논문 주제와 관련된 논문 목록을 표시하고 새로운 논문 항목을 추가할 수 있다.
* 사용자가 Topic List 화면에서 논문 주제를 선택하지 않았으면, Paper List 화면에는 사용자에게 논문의 주제를 먼저 선택하라고 안내한다.
* Paper List 화면의 첫 줄은 선택한 논문 주제 이름을 표시한다.
* Paper List 화면의 상단은 논문 주제와 관련된 논문 목록을 표시한다.
* 논문 목록은 표의 형식으로 출력하며, "Title", "Authors", "Actions", "Year", "URL"의 열을 갖는다.
* 논문 주제와 관련된 논문의 목록 정보는 "data/{논문주제}/" 폴더 안에서 json 파일을 검색하여 얻을 수 있다.
* json 파일의 이름은 논문의 pdf 주소를 base64로 인코딩하여 파일이름으로 사용한다.
* json 파일에는 논문의 URL 주소, 논문 제목, 저자명, 발표연도, 논문의 초록 정보가 저장된다.
* 논문 목록에서 논문의 출력 순서는 최근에 발표된 논문을 먼저 출력하되 발표연도가 동일한 경우에는 논문 제목의 알파벳 순서로 출력한다.
* 논문 목록에서 논문의 제목은 dodgerblue 색으로 표시한다.
* 논문 목록에서 논문의 제목을 클릭하면, Paper Detail 화면에 선택한 논문의 상세한 정보를 표시한다.
* "Actions" 열은 "Move" 버튼과 "Delete" 버튼을 표시한다.
* "Move" 버튼을 누르면 해당 논문 정보를 다른 논문 주제로 옮길 수 있다. 이때 해당 json 파일도 함께 적절한 경로로 이동한다.
* "Delete" 버튼을 누르면 해당 논문 정보를 삭제할 수 있다. 이때 해당 json 파일도 함께 삭제한다. 논문 정보의 삭제 시에는 사용자의 확인을 받는다.
* 논문 목록에서 논문의 URL을 클릭하면 해당 주소를 새 창으로 띄운다.
* 논문 목록의 하단에는 논문을 새로 검색할 수 있는 폼(form)이 표시된다.
* 폼은 왼쪽부터 검색하고자 하는 키워드를 입력하는 텍스트 박스, 검색 기간을 선택하는 콤보 박스, 검색할 논문의 수를 선택하는 콤보 박스, "Search" 버튼으로 구성된다.
* 검색하고자 하는 키워드를 입력하는 텍스트 박스에는 Topic List 화면에서 선택한 논문의 주제 이름이 기본적으로 입력되어 있으며 사용자가 변경할 수 있다.
* 논문 검색은 arxiv의 API를 사용한다.
* 검색 기간을 선택하는 콤보 박스에서 최근 30년까지 선택할 수 있으며, 콤보 박스에서 검색 기간을 선택하지 않으면 논문 검색 시 논문 검색 기간을 제한하지 않는다.
* 예를 들어 올해가 2025년이면 검색 기간을 선택하는 콤보 박스에 "---", "2023~2025", "2020~2022", "2017~2019", "2014~2016", ...과 같이 총 10개의 선택 항목을 표시한다.
* 올해의 연도는 시스템 날짜 정보를 통해 얻는다.
* 검색 건수는 100, 200, 500, 1000 중에서 선택할 수 있다.
* "Search" 버튼을 누르면 사용자가 입력한 키워드를 논문 제목(title), 저자명(authors), 논문 초록(abstract)에서 검색한다.
* 논문 검색 결과는 표의 형식으로 출력하며, "Title", "Authors", "Year", "URL"의 열을 갖는다.
* 논문 검색 결과를 표시할 때 논문 제목은 dodgerblue 색으로 표시한다.
* 논문 검색 결과는 최신 발표논문을 먼저 출력하되 발표연도가 동일한 경우에는 논문 제목의 알파벳 순서로 출력한다.
* 논문 검색 결과 목록에서 논문 제목을 클릭하면, Paper Detail 화면에 선택한 논문의 상세한 정보를 표시한다.
* 논문 검색 결과 목록에서 논문의 URL을 클릭하면 해당 주소를 새 창으로 띄운다.

### Paper Detail 화면의 주요 기능

* Paper Detail 화면은 Paper List 화면의 논문 목록 또는 논문 검색 결과 목록에서 선택한 논문의 상세 정보를 표시한다.
* 선택한 논문이 없으면 Paper Detail 화면은 사용자에게 논문을 먼저 선택하라고 안내한다.
* Paper List 화면의 논문 검색 결과목록에서 논문을 선택하여 Paper Detail 화면이 표시된 경우에는 선택한 논문의 논문 제목, 저자명, 발표연도, 논문의 URL을 화면의 상단에 한 줄로 표시한다.
* 논문의 URL을 클릭하면 해당 주소를 새 창으로 띄운다.
* 논문의 초록을 화면 상단의 두번째 줄에 표시한다.
* Paper Detail 화면의 중앙은 경계가 없는 테이블을 이용하여 좌우의 두 부분으로 나눈다.
* 테이블의 높이는 화면의 100%를 차지하며, 좌우 두 부분의 폭은 60대 40의 비율로 나눈다.
* 표의 왼쪽은 논문의 PDF 파일을 볼 수 있다.
* 표의 오른쪽 부분에는 "Summarize" 버튼을 표시한다.
* 사용자가 "Summarize" 버튼을 누르면 논문의 URL을 통해 논문 PDF 파일을 읽고, 텍스트를 추출한 후, Gemini에 자동 논문 요약을 요청한다.
* 이때 논문의 URL이 <http://arxiv.org/abs/2506.16571v2>이면, 논문 PDF의 URL은 <http://arxiv.org/pdf/2506.16571v2>이다.
* 논문의 자동 요약을 위한 프롬프트는 별도의 파일로 관리한다.
* 사용자 프롬프트는 "data/userprompt.txt" 파일에서 읽는다.
* 사용자 프롬프트의 "{context}" 부분을 논문에서 추출한 텍스트로 바꿔야 한다.
* Gemini의 응답은 stream 방식으로 받아 실시간으로 화면에 출력하고, 논문의 자동 요약이 완료되면, 논문 정보를 파일에 저장한다.
* 이때, 논문의 URL 주소, 논문 제목, 저자명, 발표연도, 논문의 초록 정보는 json 파일(.json)로 저장한다.
* 논문의 자동 요약 정보는 마크다운 파일(.md)로 저장한다.
* json 파일과 md 파일의 저장 위치는 "data/{논문주제}/" 폴더이며, 파일의 이름은 논문의 pdf 주소를 base64로 인코딩하여 사용한다.
* Paper List 화면의 논문 목록에서 논문을 선택하여 Paper Detail 화면이 표시된 경우에는 "data/{논문주제}/" 폴더 안에서 해당 json 파일과 md 파일을 읽어 해당 논문의 정보를 얻는다.
* json 파일에서 논문 정보를 읽으면 논문 제목, 저자명, 발표연도, 논문의 URL을 화면 상단의 표에 한 줄로 표시한다.
* 논문의 URL을 클릭하면 해당 주소를 새 창으로 띄운다.
* 논문의 초록은 화면 상단 표의 두번째 줄에 표시한다.
* Paper Detail 화면의 중앙은 경계가 없는 테이블을 이용하여 좌우의 두 부분으로 나눈다.
* 테이블의 높이는 화면의 100%를 차지하며, 좌우 두 부분의 폭은 60대 40의 비율로 나눈다.
* 표의 왼쪽은 논문의 PDF 파일을 볼 수 있다.
* 표의 오른쪽 부분에는 논문의 자동 요약 내용을 표시한다.
* 논문 자동 요약 파일이 없으면, "Summarize" 버튼을 표시한다.
* 논문의 자동 요약의 높이는 화면의 100%를 차지한다. 자동 요약 내용이 많으면 상하 스크롤 바가 표시된다.
* 논문 자동 요약 정보는 마크다운 형식으로 출력한다.
* 논문 자동 요약 정보의 수식은 mathjax를 이용하여 렌더링한다.
* 논문 자동 요약 정보 중 문장 내에서 하나의 "$" 심볼로 둘러싼 수식도 렌더링해야 한다. 즉 "$a_1$"도 렌더링해야 한다.
* 논문 자동 요약이 완료되면 "data/{논문주제}/" 폴더 안에 md 파일로 저장한다.